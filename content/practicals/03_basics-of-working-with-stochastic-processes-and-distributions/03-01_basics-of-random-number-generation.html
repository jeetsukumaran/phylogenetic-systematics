<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.26">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jeet Sukumaran">

<title>Random number generation and management – Just enough Julia for scientific informatics and reasoning</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../../">
<script src="../../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../../site_libs/quarto-html/quarto-syntax-highlighting-587c61ba64f3a5504c4d52d930310e48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../../site_libs/bootstrap/bootstrap-814259f4bb4f29d3679909d06d088a68.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../../../site_libs/quarto-contrib/foldbox/foldbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>
.curriculum-exercise {
  --color1: #ffffff;
  --color2: #000000;
}
.curriculum-proficiencies {
  --color1: #ffffff;
  --color2: #000000;
}
.model-definition {
  --color1: #ffffff;
  --color2: #000000;
}
.curriculum-resources {
  --color1: #ffffff;
  --color2: #000000;
}
.curriculum-tutorials {
  --color1: #ffffff;
  --color2: #000000;
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../../styles.css">
</head>

<body class="nav-sidebar docked quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item">
      Just enough Julia for scientific informatics and reasoning
      </li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../../">Just enough Julia for scientific informatics and reasoning</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#pseudo-random-number-generators" id="toc-pseudo-random-number-generators" class="nav-link active" data-scroll-target="#pseudo-random-number-generators"><span class="header-section-number">1</span> Pseudo-random number generators</a></li>
  <li><a href="#pseudo-random-number-generator-best-practices-in-julia" id="toc-pseudo-random-number-generator-best-practices-in-julia" class="nav-link" data-scroll-target="#pseudo-random-number-generator-best-practices-in-julia"><span class="header-section-number">2</span> Pseudo-random number generator best practices in Julia</a>
  <ul class="collapse">
  <li><a href="#use-the-default-random-number-generator-for-convenience" id="toc-use-the-default-random-number-generator-for-convenience" class="nav-link" data-scroll-target="#use-the-default-random-number-generator-for-convenience"><span class="header-section-number">2.1</span> Use the default random number generator for convenience</a></li>
  <li><a href="#explicitly-manage-the-random-number-generator-for-robust-reproducibility-and-replicability" id="toc-explicitly-manage-the-random-number-generator-for-robust-reproducibility-and-replicability" class="nav-link" data-scroll-target="#explicitly-manage-the-random-number-generator-for-robust-reproducibility-and-replicability"><span class="header-section-number">2.2</span> Explicitly manage the random number generator for robust reproducibility and replicability</a></li>
  </ul></li>
  <li><a href="#sample-from-uniform-distributions-using-the-rng-function" id="toc-sample-from-uniform-distributions-using-the-rng-function" class="nav-link" data-scroll-target="#sample-from-uniform-distributions-using-the-rng-function"><span class="header-section-number">3</span> Sample from uniform distributions using the <code>rng</code> function</a>
  <ul class="collapse">
  <li><a href="#sampling-from-a-sequence-list-or-set-with-uniform-random-probability" id="toc-sampling-from-a-sequence-list-or-set-with-uniform-random-probability" class="nav-link" data-scroll-target="#sampling-from-a-sequence-list-or-set-with-uniform-random-probability"><span class="header-section-number">3.1</span> Sampling from a sequence, list, or set with uniform random probability</a></li>
  <li><a href="#sampling-random-integers-from-a-fixed-range-with-uniform-probability" id="toc-sampling-random-integers-from-a-fixed-range-with-uniform-probability" class="nav-link" data-scroll-target="#sampling-random-integers-from-a-fixed-range-with-uniform-probability"><span class="header-section-number">3.2</span> Sampling random integers from a fixed range with uniform probability</a></li>
  <li><a href="#sampling-random-continuous-values-from-0-1-with-uniform-probability" id="toc-sampling-random-continuous-values-from-0-1-with-uniform-probability" class="nav-link" data-scroll-target="#sampling-random-continuous-values-from-0-1-with-uniform-probability"><span class="header-section-number">3.3</span> Sampling random continuous values from <span class="math inline">\((0, 1]\)</span> with uniform probability</a></li>
  </ul></li>
  <li><a href="#sampling-a-random-event-of-a-particular-probaility" id="toc-sampling-a-random-event-of-a-particular-probaility" class="nav-link" data-scroll-target="#sampling-a-random-event-of-a-particular-probaility"><span class="header-section-number">4</span> Sampling a random event of a particular probaility</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Random number generation and management</h1>
</div>



<div class="quarto-title-meta column-body">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jeet Sukumaran </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="pseudo-random-number-generators" class="level2" data-number="1">
<h2 data-number="1" class="anchored" data-anchor-id="pseudo-random-number-generators"><span class="header-section-number">1</span> Pseudo-random number generators</h2>
<p>Key concept: A pseudo-random number generator deterministically generates a sequence of numbers that are distributed randomly.</p>
<p>A computer algorithm cannot generate a truly random result. Computer algorithms are <em>deterministic</em>. However, a computer algorithm generate a sequence of numbers based on a series of deterministic calculations that behave like a sequence of random numbers would. These algorithms are known as <em>Pseudo-random number generators</em> (PRNG). Pseuodo-random number generators are deterministic, and, being deterministic, their results—the sequence of random numbers they generate—are predictable.</p>
<p>A computer program (or algorithm) is a deterministic machine. For some given input, it produces some particular output, based on the its programming. It cannot produce a truly random value in the sense of being , as, for any particular input, an algorithm will produce the same predictable output. For many applications, however, what is needed are not so much values that are absolutely random, but rather a series of numbers that are random with respect to each other, at least up to some or values that can be generated one after another that do not have periodicities, patterns, orders, or “structure” in the sequence, at least for particular scale or size of number set. (For other applications, where true unpredictable as well as non-autocorrelated randomness is strictly needed, computers rely on hardware incorporating some physical source randomness, such as radioactive decay or the wax blobs in lava lamps.)</p>
<p>A <em>pseudo-random number generator</em> is computer algorithm that can produce a series of values that behave like a random sequence with no observable periodicity or pattern, stastistically or otherwise, for a some very long run of numbers. ( The number of random numbers a particular PRNG can generate before repeating is known as its <em>periodicity</em>. <em>All</em> PRNG’s have periodicities, i.e.&nbsp;will eventually begin repeating the sequence, but good PRNG’s, and the ones we will be using, have <em>HUGE</em> periodicities (<span class="math inline">\(2^128\)</span>, to be exact). All PRNG’s have periodicities because of the reality of being needed to be represented on computer with a finite number of bits. The number of bits we use to represent the random numbers (or, the internal state that the PRNG tracks and from which it generates the random numbers) sets the limit to the largest number that can generated. This also sets the limit to the <em>number</em> of numbers that can be generated, This means that at some point or another, the update of one iteration will result in a input value for the next iteration that has been used before in the sequence, resulting in the sequence repeating from that point. A 32-bit PRNG might repeat after <span class="math inline">\(2^32\)</span> numbers, while cryptographic applications (and many modern computing platforms, including Julia) use 128-bit keys, resulting in periodicities of <span class="math inline">\(2^128\)</span>. )</p>
<p>The sequence of numbers that are generated by PRNG are “random” in most ways, including in terms of quantifying its randomness such as its entropy or fitting a uniform probility distribution better than any other, except for one: predictability of the sequence itself. In turns out, however, that, for most applications, including critical cryptographic ones, predictability of the sequence does not matter. What matters is that there is no ordering, patterns, auto-correlations or cross-correlations, or any sort of structure in the numbers, and that the frequency distribution of values follows that of a uniform probability distribution: every possible value is equally probable to occur at every step And this a PRNG can deliver, given usage that does not exceed their periodicity. (In fact, while the entire sequence of numbers generated by a PRNG is predictable, given the algorithm and initial seed, from one number the next (or for that matter, the previous), is entirely unpredictable <em>without</em> knowing the transition or PRNG function. )</p>
<p>Given an initial starting or “seed” value, a PRNG algorithm will compute and return a value, and then use this value as the input value for the next random value generated, thus forming chain of inputs and outputs In more complex algorithms, a separate internal state of a set values is computed from the input value, and a separate function is used to calculate the random number from this internal state. It is this internal state that is passed as input to next step rather than the random number itself. In this way, with each output forming the input for the next step, a sequence of numbers are deterministically generated from the initial seed. The entire sequence itself is deterministically generated from the (deterministic) output of one calculation forming the input the to the nex, starting from the initial seed value. As such, any particular seed value given to the algorithm, e.g., 108 or 99, will always return the exact same sequence of numbers. While not random or unpredictable, and, in fact, quite the opposite—deterministic and predictable—the entire sequence is random in that there is no autocorrelation, patterns, or periodicity in the numbers that might lead to artifactual structure in results that rely in it.</p>
<p>This predictability of number sequence from a pseudo-random number generator is not really a practical limitation, and, in fact, has some important roles in software engineering as well as scientific computing. It can be useful, sometimes critically so, in software development: the key to solving a bug is to be able to reliably replicate it, and the predictably of a pseudo-random number sequence allows for debugging of programs that rely on randomness including a lot of scientific research software (e.g.&nbsp;Bayesian Markov chain Monte Carlo inference programs). It can also be very useful in scientific research: many times, it is sufficient to note the random seed used for a particular suite of simulations or stochastic heuristic based inference for replicability purposes, instead of the giga-, terra- (or peta-?) bytes of data or results generated secondarily based on values of the random number chain itself.</p>
</section>
<section id="pseudo-random-number-generator-best-practices-in-julia" class="level2" data-number="2">
<h2 data-number="2" class="anchored" data-anchor-id="pseudo-random-number-generator-best-practices-in-julia"><span class="header-section-number">2</span> Pseudo-random number generator best practices in Julia</h2>
<section id="use-the-default-random-number-generator-for-convenience" class="level3" data-number="2.1">
<h3 data-number="2.1" class="anchored" data-anchor-id="use-the-default-random-number-generator-for-convenience"><span class="header-section-number">2.1</span> Use the default random number generator for convenience</h3>
<p>In development, exploratary, pilot, or less demanding workflows you can rely on the default random generator, using the <code>Random.seed!</code> function to set the seed.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb1"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Get reference to the global random number generator</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> <span class="bu">Random</span>.<span class="fu">default_rng</span>()</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Explicitly set its seed</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="bu">Random</span>.<span class="fu">seed!</span>(rng, <span class="fl">42</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co">#  </span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rand</span>(<span class="dt">Int</span>, <span class="fl">10</span>)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">rand</span>([<span class="ch">'A'</span>, <span class="ch">'C'</span>, <span class="ch">'G'</span>, <span class="ch">'T'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
<section id="explicitly-manage-the-random-number-generator-for-robust-reproducibility-and-replicability" class="level3" data-number="2.2">
<h3 data-number="2.2" class="anchored" data-anchor-id="explicitly-manage-the-random-number-generator-for-robust-reproducibility-and-replicability"><span class="header-section-number">2.2</span> Explicitly manage the random number generator for robust reproducibility and replicability</h3>
<p>In the full and final production-grade software, you should design all your programs to (1) optionally take a user-specific random number seed and, if not given, generate your own; (2) report and log the random number seed used; and (3) instantiate and use your own random number generator object in all computation, passing it around to different functions or objects that need them.</p>
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb2"><pre class="sourceCode julia code-with-copy"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="im">using</span> <span class="bu">Random</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate a PRNG using the "Xoshiro" algorithm with the seed value of 42</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> <span class="bu">Random</span>.<span class="fu">Xoshiro</span>(<span class="fl">42</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Instantiate a PRNG using the "Mersenne Twister" with the seed value of 1999</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>rng <span class="op">=</span> <span class="bu">Random</span>.<span class="fu">MersenneTwister</span>(<span class="fl">1999</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `rand` with the `rng` to sample an `Int` (integer) value</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="fu">rand</span>(rng, <span class="dt">Int</span>, <span class="fl">10</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Use `rand` with the `rng` to sample a random value from the list</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="fu">rand</span>(rng, [<span class="ch">'A'</span>, <span class="ch">'C'</span>, <span class="ch">'G'</span>, <span class="ch">'T'</span>])</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</section>
</section>
<section id="sample-from-uniform-distributions-using-the-rng-function" class="level2" data-number="3">
<h2 data-number="3" class="anchored" data-anchor-id="sample-from-uniform-distributions-using-the-rng-function"><span class="header-section-number">3</span> Sample from uniform distributions using the <code>rng</code> function</h2>
<p>The <code>rng</code> function will typically the function you use to generate random variates of different shapes, and sizes and characteristics. This function is available natively with Julia, though you will need to bring it into the global namespace with <code>using Random</code>.</p>
<section id="sampling-from-a-sequence-list-or-set-with-uniform-random-probability" class="level3" data-number="3.1">
<h3 data-number="3.1" class="anchored" data-anchor-id="sampling-from-a-sequence-list-or-set-with-uniform-random-probability"><span class="header-section-number">3.1</span> Sampling from a sequence, list, or set with uniform random probability</h3>
</section>
<section id="sampling-random-integers-from-a-fixed-range-with-uniform-probability" class="level3" data-number="3.2">
<h3 data-number="3.2" class="anchored" data-anchor-id="sampling-random-integers-from-a-fixed-range-with-uniform-probability"><span class="header-section-number">3.2</span> Sampling random integers from a fixed range with uniform probability</h3>
</section>
<section id="sampling-random-continuous-values-from-0-1-with-uniform-probability" class="level3" data-number="3.3">
<h3 data-number="3.3" class="anchored" data-anchor-id="sampling-random-continuous-values-from-0-1-with-uniform-probability"><span class="header-section-number">3.3</span> Sampling random continuous values from <span class="math inline">\((0, 1]\)</span> with uniform probability</h3>
<div class="callout callout-style-default callout-note callout-titled" title="How a discrete-valued machine generating continuous random values">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="true" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Note</span>How a discrete-valued machine generating continuous random values
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse show">
<div class="callout-body-container callout-body">
<p>A computer’s RNG (Random Number Generator), generates (pseudo-)random <em>integer</em> values. For continous value, the computer will generate values by sampling from a <em>grid</em> in <span class="math inline">\([0, 1)\)</span>.</p>
<p>As with the challenges of a deterministic machine generating random values, when requiring random continuous value, we are faced with the challenge of a discrete-value calculating machine dealing with non-integer values. A computer can generate a pseudo-random integer value, <span class="math inline">\(k\)</span>, using its Pseudo-Random Number Generator. For continuous values, the generated integer value, <span class="math inline">\(k\)</span> is then scaled to a floating-point <span class="math inline">\(x\)</span> by, for e.g., <span class="math inline">\(\frac{k}{2p}\)</span>, where <span class="math inline">\(p\)</span> is the number usable bits and <span class="math inline">\(0 \le k \le 2^p - 1\)</span>. The result in floating point value in the range <span class="math inline">\(0 \le x &lt; 1\)</span>.</p>
<p>While 1 is excluded from the range, this does not change the distribution. A continuous uniform distribution on <span class="math inline">\([0, 1]\)</span> assigns probability zero to any <em>single</em> point, include <span class="math inline">\(0\)</span> or <span class="math inline">\(1\)</span> in that range, so this exclusion of 1 does not change the characteristics of the distribution. (With continuous distributions, we do not ask what is the probability of observing any particular value. We ask is the probability of observing a range of values.)</p>
<p>Let</p>
<ul>
<li><span class="math inline">\(p\)</span> = number of mantissa bits of the target floating-point type (<span class="math inline">\(p=53\)</span> for <code>Float64</code>)</li>
<li><span class="math inline">\(k\)</span> drawn uniformly from</li>
</ul>
<p><span class="math display">\[
{0,1,\dots,2^p - 1}
\]</span></p>
<p>Define</p>
<p><span class="math display">\[
x = \frac{k}{2^p}.
\]</span></p>
<p>Then:</p>
<ul>
<li>The mapping <span class="math inline">\(k \mapsto x\)</span> is <strong>bijective</strong></li>
<li>Each possible <span class="math inline">\(x\)</span> has probability exactly <span class="math inline">\(2^{-p}\)</span></li>
<li>The support is</li>
</ul>
<p><span class="math display">\[
\left\{ 0, \frac{1}{2^p}, \frac{2}{2^p}, \dots, \frac{2^p-1}{2^p} \right\}
\subset [0,1)
\]</span></p>
<p>Note this is a <strong>discrete uniform distribution</strong> over the set of values <span class="math inline">\(\{0, \frac{1}{2^p}, \frac{2}{2^p}, \ldots, \frac{2^p-1}{2^p}\}\)</span>, not a continuous one. The operation bins the range <span class="math inline">\([0, 1)\)</span> into <span class="math inline">\(2^p\)</span> equal width bins of <span class="math inline">\(\frac{1}{1^p}\)</span> width. For <code>Float64</code> this result in <span class="math inline">\(2^{53} \approx 9 \times 10^{15}\)</span> bins of width <span class="math inline">\(2^{-53} \approx 1.11 \times 10^{-16}\)</span>.</p>
</div>
</div>
</div>
</section>
</section>
<section id="sampling-a-random-event-of-a-particular-probaility" class="level2" data-number="4">
<h2 data-number="4" class="anchored" data-anchor-id="sampling-a-random-event-of-a-particular-probaility"><span class="header-section-number">4</span> Sampling a random event of a particular probaility</h2>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <ul class="footer-items list-unstyled">
    <li class="nav-item">
    <a class="nav-link" href="mailto:jeetsukumaran@gmail.com">
<p>© Jeet Sukumaran and co-authors</p>
</a>
  </li>  
</ul>
    </div>   
    <div class="nav-footer-center">
<p>Please share or adapt under the Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License (CC BY-NC-SA 4.0).</p>
</div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/jeetsukumaran">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>




</body></html>